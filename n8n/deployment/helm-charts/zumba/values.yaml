# Default values for zumba Helm chart
# These are sensible defaults that work for most deployments
# Override these in environment-specific values.yaml files

# Namespace will be set by Kustomize/ArgoCD
# namespace: override-me

n8n:
  image:
    repository: docker.n8n.io/n8nio/n8n
    tag: "2.5.0"
    pullPolicy: IfNotPresent
  
  # Default resources - override per environment
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 1000m
      memory: 2Gi
  
  persistence:
    enabled: true
    storageClass: local-path
    size: 5Gi  # Default - override per environment
    mountPath: /home/node/.n8n
  
  env:
    GENERIC_TIMEZONE: Europe/Berlin
    TZ: Europe/Berlin
    N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS: "true"
    N8N_RUNNERS_ENABLED: "true"
    N8N_SECURE_COOKIE: "false"  # Override to "true" when HTTPS is enabled
    DB_TYPE: postgresdb
    DB_POSTGRESDB_DATABASE: n8n
    DB_POSTGRESDB_HOST: postgres
    DB_POSTGRESDB_PORT: "5432"
    DB_POSTGRESDB_USER: n8n
    DB_POSTGRESDB_SCHEMA: public
  
  service:
    type: ClusterIP
    port: 5678

postgres:
  image:
    repository: postgres
    tag: "18"
    pullPolicy: IfNotPresent
  
  # Default resources - override per environment
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi
  
  persistence:
    enabled: true
    storageClass: local-path
    size: 5Gi  # Default - override per environment
    mountPath: /var/lib/postgresql/data
  
  database: n8n
  username: n8n
  
  service:
    type: ClusterIP
    port: 5432
  
  # External access configuration
  # Override per environment to enable LoadBalancer and set external port
  externalAccess:
    enabled: false
    type: LoadBalancer  # Service type when external access is enabled
    port: 5432  # External port - override per environment (e.g., 5433 for staging, 5434 for production)
    loadBalancerIP: ""  # Optional: specify a fixed IP if your LB supports it

ingress:
  enabled: true
  className: traefik
  host: n8n.example.com  # Override per environment
