.PHONY: help build run dev clean test

help: ## Zeigt diese Hilfe an
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-15s\033[0m %s\n", $$1, $$2}'

build: ## Baut die Applikation
	@echo "ğŸ”¨ Building..."
	@go build -o ./tmp/server ./cmd/server
	@echo "âœ… Build erfolgreich!"

run: build ## Baut und startet den Server
	@echo "ğŸº Starte Stammtisch Wrapped..."
	@./tmp/server

dev: ## Startet den Development Server mit Hot Reload (benÃ¶tigt Air)
	@echo "ğŸ”¥ Starting development server with Air..."
	@air

clean: ## RÃ¤umt Build-Artefakte auf
	@echo "ğŸ§¹ Cleaning..."
	@rm -rf ./tmp
	@echo "âœ… Clean erfolgreich!"

test: ## FÃ¼hrt Tests aus
	@echo "ğŸ§ª Running tests..."
	@go test -v ./...

install: ## Installiert Dependencies
	@echo "ğŸ“¦ Installing dependencies..."
	@go mod download
	@go install github.com/air-verse/air@latest
	@echo "âœ… Dependencies installiert!"

.DEFAULT_GOAL := help
